{# app/Resources/views/Trick/update.html.twig #}

{% extends "layout.html.twig" %}

{% form_theme form  'Form/form_errors.html.twig' %}

{% block title %}SnowTricks::Update Trick{% endblock %}

{% block body %}

	<div class="container hv-body">
		<div class="col-12">
            <h3>Mise à jour d'un trick</h3>
            <form class="needs-validation" method="POST" enctype="multipart/form-data">

                {# General errors in the form. #}
                {{ form_errors(form) }}

                <div class="form-group">
                    {{ form_label(form.title, "Nom du Trick") }}
                    {{ form_widget(form.title) }}
                </div>

                <div class="form-group">
                    {{ form_label(form.content, "Description") }}
                    {{ form_widget(form.content) }}
                </div>

                <fieldset>
                    <div class="form-group">
                        {{ form_label(form.categories, "Groupe") }}
    
                        {# store the prototype on the data-prototype attribute #}
                        <ul id="add_categories" class="form-list"
                            data-prototype="{{ form_widget(form.categories.vars.prototype)|e }}"
                            data-widget-tags="{{ '<li class="row"></li>'|e }}">
                        {% for category in form.categories %}
                            <li class="row">
                                <button 
                                    type='button'
                                    class='btn btn-danger btn-xs mr-3'
                                    onclick='removeFile($(this));'>
                                        <i class='fa fa-times' aria-hidden='true'></i>
                                </button>
                                {{ form_errors(category) }}
                                {{ form_widget(category) }}
                            </li>
                        {% endfor %}
                        </ul>
    
                        <a href="#" class="add-another-collection-widget" data-list="#add_categories">
                            <button class="btn btn-primary">
                                <i class='fa fa-plus'></i> Ajouter un groupe
                            </button>
                        </a>
                    </div>
                </fieldset>

                <fieldset>
                    <div class="form-group">
                        {{ form_label(form.pictures, "Des images à ajouter?") }}
                        {{ form_errors(form.pictures) }}
    
                        {# store the prototype on the data-prototype attribute #}
                        <ul id="add_image" class="form-list"
                            data-prototype="{{ form_widget(form.pictures.vars.prototype)|e }}"
                            data-widget-tags="{{ '<li class="row"></li>'|e }}">
                        {% for picture in form.pictures %}
                            <li class="row deleteOnLoad">
                                <div class="row">
                                    <div class="row">
                                        <button 
                                            type='button'
                                            class='btn btn-danger btn-xs mr-3 st-media-button'
                                            onclick='removeFile($(this));'>
                                                <i class='fa fa-times' aria-hidden='true'></i>
                                        </button>
                                    </div>
                                    {{ form_errors(picture) }}
                                    <div class="col-10">
                                        <img src="{{ asset(picture.vars.data.path) }}" class="img-fluid" style="width: 150px;">

                                        {{ form_widget(picture.children.file) }}
                                        
                                        {{ form_label(picture.children.headlinePicture) }}
                                        {{ form_widget(picture.children.headlinePicture) }}
                                    </div>
                                </div>
                            </li>
                        {% endfor %}
                        </ul>
    
                        <a href="#" class="add-another-collection-widget" data-list="#add_image">
                            <button class="btn btn-primary">
                                <i class='fa fa-plus'></i> Ajouter une image
                            </button>
                        </a>
                    </div>
                </fieldset>

                {{ form_widget(form._token) }}

                <button id="saveTrick" type="submit" class="btn btn-primary">Mettre à jour!</button>

            </form>
        </div>
    </div>

{% endblock %}

{% block javascripts %}
    {{ parent() }}

    <script src="{{ asset('js/st-add-collection-widget.js') }}" type="text/javascript"></script>
{% endblock %}
